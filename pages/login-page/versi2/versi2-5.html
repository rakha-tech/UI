<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Login v2.5 ‚Äì Quantum-Secure Holo-Vault</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <style>
      :root {
        --bg: #000;
        --glass: rgba(255, 255, 255, 0.06);
        --border: rgba(255, 255, 255, 0.15);
        --neon: #00f9ff;
        --neon2: #ff00ff;
        --text: #fff;
        --err: #ff3333;
        --ok: #00ff88;
      }
      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f5f5f5;
          --glass: rgba(0, 0, 0, 0.05);
          --border: rgba(0, 0, 0, 0.2);
          --text: #000;
        }
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", sans-serif;
      }
      body,
      html {
        height: 100%;
        background: var(--bg);
        color: var(--text);
        overflow: hidden;
      }
      canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
      }

      /* AR-style lens distortion wrapper */
      .lens {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        backdrop-filter: blur(0.5px) hue-rotate(0deg);
        transition: backdrop-filter 0.3s;
      }
      .lens.on {
        backdrop-filter: blur(2px) hue-rotate(180deg);
      }

      /* Floating card */
      .vault {
        position: relative;
        z-index: 2;
        width: 420px;
        max-width: 92vw;
        padding: 55px 40px;
        background: var(--glass);
        border: 1px solid var(--border);
        border-radius: 32px;
        backdrop-filter: blur(25px) saturate(180%);
        box-shadow: 0 0 40px var(--neon), inset 0 0 30px var(--neon2) 0%;
        transition: transform 0.4s cubic-bezier(0.17, 0.84, 0.44, 1),
          border-radius 0.4s;
        transform: perspective(1200px) rotateX(0) rotateY(0) scale(1);
      }
      @media (prefers-reduced-motion: reduce) {
        .vault {
          transition: none;
        }
      }
      h1 {
        text-align: center;
        font-size: 1.9rem;
        background: linear-gradient(90deg, var(--neon), var(--neon2));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 8px;
      }
      .sub {
        text-align: center;
        font-size: 0.9rem;
        color: #aaa;
        margin-bottom: 30px;
      }

      .field {
        position: relative;
        margin-bottom: 28px;
      }
      .field input {
        width: 100%;
        padding: 16px;
        background: var(--glass);
        border: 1px solid var(--border);
        border-radius: 12px;
        color: var(--text);
        transition: 0.3s;
      }
      .field label {
        position: absolute;
        top: 16px;
        left: 16px;
        color: #aaa;
        transition: 0.3s;
        pointer-events: none;
      }
      .field input:focus + label,
      .field input:not(:placeholder-shown) + label {
        top: -9px;
        left: 12px;
        font-size: 0.75rem;
        color: var(--accent);
        background: var(--bg);
        padding: 0 6px;
      }
      .togglePw {
        position: absolute;
        right: 16px;
        top: 16px;
        cursor: pointer;
        color: #aaa;
        font-size: 1.2rem;
      }

      button {
        width: 100%;
        padding: 16px;
        border: none;
        border-radius: 12px;
        background: linear-gradient(90deg, var(--neon), var(--accent2));
        color: #000;
        font-weight: 700;
        font-size: 1rem;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: 0.3s;
      }
      button:active {
        transform: scale(0.97);
      }
      button:disabled {
        filter: saturate(0.3);
      }

      .error-msg {
        height: 16px;
        font-size: 0.8rem;
        color: var(--err);
        margin-top: 4px;
      }
      .signup {
        margin-top: 25px;
        text-align: center;
        font-size: 0.85rem;
        color: #aaa;
      }
      .signup a {
        color: var(--neon);
      }

      /* WebAuthn / NFC buttons */
      .extra {
        position: absolute;
        top: -55px;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 12px;
      }
      .extra button {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        border: 1px solid var(--border);
        background: var(--glass);
        color: var(--neon);
        font-size: 1.3rem;
        cursor: pointer;
      }
      #nfcBtn {
        animation: blink 2s infinite;
      }
      @keyframes blink {
        50% {
          opacity: 0.5;
        }
      }

      /* Quantum key visualiser */
      #quantum {
        position: absolute;
        bottom: -80px;
        left: 50%;
        transform: translateX(-50%);
        width: 300px;
        height: 60px;
        border-radius: 30px;
        background: var(--glass);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #aaa;
        font-size: 0.8rem;
      }
      #quantum span {
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--neon);
        margin: 0 2px;
      }
    </style>
  </head>
  <body>
    <canvas id="tunnel"></canvas>
    <div class="lens" id="lens"></div>

    <div class="vault" id="vault">
      <div class="extra">
        <button id="webauthnBtn" title="WebAuthn">üîê</button>
        <button id="nfcBtn" title="Tap NFC card">üì≤</button>
        <button id="arBtn" title="Toggle AR lens">ü•Ω</button>
      </div>

      <h1>Quantum-Secure Holo-Vault</h1>
      <p class="sub">Choose your reality</p>

      <form id="form">
        <div class="field">
          <input type="email" id="email" placeholder=" " required />
          <label>Email</label>
        </div>

        <div class="field">
          <input
            type="password"
            id="pw"
            placeholder=" "
            minlength="4"
            required
          />
          <label>Password</label>
          <span class="togglePw" id="togglePw">üëÅ</span>
        </div>

        <div class="error-msg" id="errorMsg"></div>
        <button id="btn" type="submit">Log In</button>
      </form>

      <div class="signup">No account? <a href="#">Create one</a></div>

      <div id="quantum">
        <span></span><span></span><span></span><span></span
        ><span></span> Quantum key: <span id="qText">generating‚Ä¶</span>
      </div>
    </div>

    <script>
      /* ---------- Fractal tunnel background ---------- */
      const t = document.getElementById("tunnel"),
        tx = t.getContext("2d");
      let frame = 0,
        timer;
      function resizeT() {
        t.width = innerWidth;
        t.height = innerHeight;
      }
      resizeT();
      addEventListener("resize", resizeT);
      function drawTunnel() {
        tx.fillStyle = "#000";
        tx.fillRect(0, 0, t.width, t.height);
        const cx = t.width / 2,
          cy = t.height / 2;
        for (let i = 0; i < 12; i++) {
          const r = (frame + i * 25) % 600;
          const alpha = 1 - r / 600;
          tx.strokeStyle = `rgba(0,249,255,${alpha})`;
          tx.lineWidth = 2;
          tx.beginPath();
          tx.arc(cx, cy, r, 0, Math.PI * 2);
          tx.stroke();
        }
        frame += 2;
        timer = requestAnimationFrame(drawTunnel);
      }
      drawTunnel();

      /* ---------- Haptic helper ---------- */
      const vibe = (ms = 30) => navigator.vibrate && navigator.vibrate(ms);

      /* ---------- WebAuthn biometric ---------- */
      document.getElementById("webauthnBtn").onclick = async () => {
        if (!window.PublicKeyCredential) {
          alert("WebAuthn not supported");
          return;
        }
        try {
          const credential = await navigator.credentials.create({
            publicKey: {
              challenge: Uint8Array.from(
                window.crypto.getRandomValues(new Uint8Array(32))
              ),
              rp: { name: "Holo-Vault", id: location.hostname },
              user: {
                id: Uint8Array.from(
                  "1234567890".split("").map((c) => c.charCodeAt(0))
                ),
                name: "demo@holo.vault",
                displayName: "Demo User",
              },
              pubKeyCredParams: [{ type: "public-key", alg: -7 }],
              authenticatorSelection: {
                authenticatorAttachment: "platform",
                userVerification: "required",
              },
              timeout: 60000,
              attestation: "none",
            },
          });
          explode("‚úÖ Fingerprint / Face registered!");
        } catch (e) {
          explode("‚ùå " + (e.message || "Cancelled"));
        }
      };

      /* ---------- NFC demo ---------- */
      document.getElementById("nfcBtn").onclick = () => {
        if ("NDEFReader" in window) {
          const ndef = new NDEFReader();
          ndef
            .scan()
            .then(
              () =>
                (ndef.onreading = ({ message }) => {
                  const rec = message.records[0];
                  const txt = new TextDecoder().decode(rec.data);
                  explode("üì≤ NFC tapped: " + txt);
                })
            )
            .catch((e) => explode("NFC error: " + e));
        } else {
          explode("üì≤ NFC API not available");
        }
      };

      /* ---------- AR lens toggle ---------- */
      document.getElementById("arBtn").onclick = () => {
        document.getElementById("lens").classList.toggle("on");
        vibe();
      };

      /* ---------- Quantum key visualiser ---------- */
      const qDots = document.querySelectorAll("#quantum span");
      setInterval(() => {
        qDots.forEach(
          (d) => (d.style.transform = `scale(${0.8 + Math.random() * 0.6})`)
        );
        document.getElementById("qText").textContent = Math.random()
          .toString(36)
          .slice(2, 8)
          .toUpperCase();
      }, 1500);

      /* ---------- Form submit ---------- */
      document.getElementById("form").addEventListener("submit", async (e) => {
        e.preventDefault();
        vibe(50);
        const btn = document.getElementById("btn");
        btn.disabled = true;
        btn.textContent = "‚Ä¢‚Ä¢‚Ä¢";
        await new Promise((r) => setTimeout(r, 1800));
        const ok = Math.random() > 0.3;
        btn.textContent = ok ? "‚úÖ Welcome" : "‚ùå Try again";
        btn.style.background = ok ? "var(--ok)" : "var(--err)";
        if (ok) explode("‚úÖ Access granted");
        setTimeout(() => {
          btn.textContent = "Log In";
          btn.style.background = "";
          btn.disabled = false;
        }, 2200);
      });

      /* ---------- Universal particle explosion ---------- */
      function explode(msg) {
        document.getElementById("errorMsg").textContent = msg;
        const c = document.createElement("canvas");
        c.style.position = "fixed";
        c.style.top = 0;
        c.style.left = 0;
        c.style.pointerEvents = "none";
        c.width = innerWidth;
        c.height = innerHeight;
        c.style.zIndex = 999;
        document.body.appendChild(c);
        const ctx = c.getContext("2d"),
          parts = [];
        for (let i = 0; i < 150; i++) {
          const a = Math.random() * Math.PI * 2,
            s = 1 + Math.random() * 4;
          parts.push({
            x: innerWidth / 2,
            y: innerHeight / 2,
            vx: Math.cos(a) * s,
            vy: Math.sin(a) * s,
            life: 60,
            r: 2 + Math.random() * 3,
          });
        }
        function boom() {
          ctx.clearRect(0, 0, innerWidth, innerHeight);
          parts.forEach((p) => {
            p.x += p.vx;
            p.y += p.vy;
            p.life--;
            ctx.fillStyle = `rgba(0,249,255,${p.life / 60})`;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
            ctx.fill();
          });
          if (parts[0].life > 0) requestAnimationFrame(boom);
          else c.remove();
        }
        boom();
        setTimeout(
          () => (document.getElementById("errorMsg").textContent = ""),
          3000
        );
      }

      /* ---------- Accessibility: ESC closes explosions ---------- */
      addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          cancelAnimationFrame(timer);
          document
            .querySelectorAll("canvas:not(#tunnel)")
            .forEach((c) => c.remove());
        }
      });
    </script>
  </body>
</html>
